 Running 'MODE=webhook gunicorn --bind 0.0.0.0:$PORT --workers 2 --threads 4 --timeout 120 main:app'
INFO:src.core.database:Added category column to questions table
INFO:src.core.database:Added last_quiz_message_id column to users table
INFO:src.core.database:Database schema initialized successfully with optimized indexes
INFO:src.core.database:Database initialized at data/quiz_bot.db
INFO:src.core.database:Timestamp migration completed: {'activity_logs': 0, 'performance_metrics': 0}
INFO:src.core.quiz:Database connection initialized in QuizManager
INFO:src.core.quiz:Saved 229 questions to file
INFO:src.core.quiz:All data saved successfully. Questions count: 229
INFO:src.core.quiz:Successfully loaded and cleaned 229 questions
INFO:src.core.quiz:Active chats: 0
INFO:src.core.quiz:Active users with stats: 0
INFO:src.core.quiz:Users with scores: 0
INFO:src.web.app:Quiz Manager initialized successfully
INFO:main:Logging configured - httpx set to WARNING to protect bot token
INFO:main:Auto-initializing bot in webhook mode with URL: https://complete-quiz-bot.onrender.com/webhook
INFO:src.web.app:Initializing bot in webhook mode with URL: https://complete-quiz-bot.onrender.com/webhook
INFO:src.web.app:Starting background event loop for webhook mode
INFO:src.web.app:Webhook mode initialized with background event loop thread
INFO:main:Bot initialized in webhook mode - ready for gunicorn
[2025-10-03 07:34:18 +0000] [56] [INFO] Starting gunicorn 23.0.0
[2025-10-03 07:34:18 +0000] [56] [INFO] Listening at: http://0.0.0.0:10000 (56)
[2025-10-03 07:34:18 +0000] [56] [INFO] Using worker: gthread
[2025-10-03 07:34:18 +0000] [59] [INFO] Booting worker with pid: 59
[2025-10-03 07:34:18 +0000] [60] [INFO] Booting worker with pid: 60
127.0.0.1 - - [03/Oct/2025:07:34:19 +0000] "HEAD / HTTP/1.1" 200 0 "-" "Go-http-client/1.1"
INFO:src.core.database:Database schema initialized successfully with optimized indexes
INFO:src.core.database:Database initialized at data/quiz_bot.db
INFO:src.core.database:Timestamp migration completed: {'activity_logs': 0, 'performance_metrics': 0}
INFO:src.bot.dev_commands:Developer commands module initialized
INFO:src.bot.handlers:TelegramQuizBot initialized with database and developer commands
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:apscheduler.scheduler:Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO:apscheduler.scheduler:Added job "send_automated_quiz" to job store "default"
INFO:apscheduler.scheduler:Added job "scheduled_cleanup" to job store "default"
INFO:apscheduler.scheduler:Added job "cleanup_old_polls" to job store "default"
INFO:apscheduler.scheduler:Added job "cleanup_questions_wrapper" to job store "default"
INFO:apscheduler.scheduler:Added job "track_memory_usage" to job store "default"
INFO:apscheduler.scheduler:Added job "cleanup_performance_metrics" to job store "default"
INFO:apscheduler.scheduler:Added job "cleanup_old_activities" to job store "default"
INFO:apscheduler.scheduler:Scheduler started
INFO:telegram.ext.Application:Application started
INFO:src.bot.handlers:Backfilling 0 groups from active_chats to database
INFO:src.bot.handlers:Successfully backfilled 0/0 groups to database
INFO:src.bot.handlers:Webhook set successfully: https://complete-quiz-bot.onrender.com/webhook
INFO:src.web.app:Telegram bot initialized successfully in webhook mode with URL: https://complete-quiz-bot.onrender.com/webhook
INFO:src.web.app:Webhook event loop is now running and will stay alive for update processing
==> Your service is live ðŸŽ‰
==> 
==> ///////////////////////////////////////////////////////////
==> 
==> Available at your primary URL https://complete-quiz-bot.onrender.com
==> 
==> ///////////////////////////////////////////////////////////
ERROR:src.web.app:Webhook received but bot is not initialized
127.0.0.1 - - [03/Oct/2025:07:34:27 +0000] "POST /webhook HTTP/1.1" 500 51 "-" "-"
ERROR:src.web.app:Webhook received but bot is not initialized
127.0.0.1 - - [03/Oct/2025:07:34:27 +0000] "POST /webhook HTTP/1.1" 500 51 "-" "-"
127.0.0.1 - - [03/Oct/2025:07:34:27 +0000] "GET / HTTP/1.1" 200 16 "-" "Go-http-client/2.0"
ERROR:src.web.app:Webhook received but bot is not initialized
127.0.0.1 - - [03/Oct/2025:07:34:29 +0000] "POST /webhook HTTP/1.1" 500 51 "-" "-"
INFO:apscheduler.executors.default:Running job "send_automated_quiz (trigger: interval[0:30:00], next run at: 2025-10-03 08:04:33 UTC)" (scheduled at 2025-10-03 07:34:33.123801+00:00)
INFO:src.bot.handlers:Starting automated quiz broadcast to 0 active chats
INFO:src.bot.handlers:Completed automated quiz broadcast cycle
INFO:apscheduler.executors.default:Job "send_automated_quiz (trigger: interval[0:30:00], next run at: 2025-10-03 08:04:33 UTC)" executed successfully
ERROR:src.web.app:Webhook received but bot is not initialized
127.0.0.1 - - [03/Oct/2025:07:34:33 +0000] "POST /webhook HTTP/1.1" 500 51 "-" "-"
ERROR:src.web.app:Webhook received but bot is not initialized
127.0.0.1 - - [03/Oct/2025:07:34:42 +0000] "POST /webhook HTTP/1.1" 500 51 "-" "-"